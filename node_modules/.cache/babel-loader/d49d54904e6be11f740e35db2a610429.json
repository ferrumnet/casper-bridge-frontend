{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kabiribraheem/Documents/casper-bridge-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"/Users/kabiribraheem/Documents/casper-bridge-frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/kabiribraheem/Documents/casper-bridge-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/kabiribraheem/Documents/casper-bridge-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kabiribraheem/Documents/casper-bridge-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";export var Web3Helper=/*#__PURE__*/function(){function Web3Helper(web3){_classCallCheck(this,Web3Helper);this.web3Client=void 0;this.web3Client=web3;}_createClass(Web3Helper,[{key:\"sendTransactionAsync\",value:function(){var _sendTransactionAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,transactions,payload){var _this=this;var txIds,_iterator,_step,_loop;return _regeneratorRuntime().wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:txIds=[];_iterator=_createForOfIteratorHelper(transactions);_context2.prev=2;_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(){var tx,txId;return _regeneratorRuntime().wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:tx=_step.value;_context.next=3;return new Promise(function(resolve,reject){var _tx$gas;return _this.web3Client.eth.sendTransaction({from:tx.from,to:tx.contract,value:tx.value||\"0x\",data:tx.data,gas:(_tx$gas=tx.gas)===null||_tx$gas===void 0?void 0:_tx$gas.gasLimit// gasPrice: tx.gas?.gasPrice,\n// chainId: this.connection.netId()\n})// .on(\"confirmation\", function (part1, part2) {\n//   console.log(\"confirmation\", part1, part2);\n// })\n.on(\"transactionHash\",function(transactionHash){//dispatch(transactionHash);\n}).then(function(h){resolve(h);}).catch(reject);});case 3:txId=_context.sent;// console.log(txId);\ntxIds.push(txId.transactionHash);case 5:case\"end\":return _context.stop();}}},_loop);});_iterator.s();case 5:if((_step=_iterator.n()).done){_context2.next=9;break;}return _context2.delegateYield(_loop(),\"t0\",7);case 7:_context2.next=5;break;case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t1=_context2[\"catch\"](2);_iterator.e(_context2.t1);case 14:_context2.prev=14;_iterator.f();return _context2.finish(14);case 17:return _context2.abrupt(\"return\",txIds.join(\",\")+\"|\"+JSON.stringify(payload||\"\"));case 18:case\"end\":return _context2.stop();}}},_callee,null,[[2,11,14,17]]);}));function sendTransactionAsync(_x,_x2,_x3){return _sendTransactionAsync.apply(this,arguments);}return sendTransactionAsync;}()}]);return Web3Helper;}();","map":{"version":3,"names":["Web3Helper","web3","web3Client","dispatch","transactions","payload","txIds","tx","Promise","resolve","reject","eth","sendTransaction","from","to","contract","value","data","gas","gasLimit","on","transactionHash","then","h","catch","txId","push","join","JSON","stringify"],"sources":["/Users/kabiribraheem/Documents/casper-bridge-frontend/src/utils/web3Helper.ts"],"sourcesContent":["import Web3 from \"web3\";\n\nexport class Web3Helper {\n  web3Client: Web3;\n\n  constructor(web3: Web3) {\n    this.web3Client = web3;\n  }\n\n  async sendTransactionAsync(\n    dispatch: any,\n    transactions: any[],\n    payload?: any\n  ): Promise<string> {\n    const txIds: string[] = [];\n    for (const tx of transactions) {\n      const txId = await new Promise<{ [k: string]: string }>(\n        (resolve, reject) =>\n          this.web3Client.eth\n            .sendTransaction({\n              from: tx.from,\n              to: tx.contract,\n              value: tx.value || \"0x\",\n              data: tx.data,\n              gas: tx.gas?.gasLimit,\n              // gasPrice: tx.gas?.gasPrice,\n              // chainId: this.connection.netId()\n            })\n            // .on(\"confirmation\", function (part1, part2) {\n            //   console.log(\"confirmation\", part1, part2);\n            // })\n            .on(\"transactionHash\", (transactionHash) => {\n              //dispatch(transactionHash);\n            })\n            .then((h: any) => {\n              resolve(h);\n            })\n            .catch(reject)\n      );\n      // console.log(txId);\n      txIds.push(txId.transactionHash);\n    }\n    // console.log(txIds, \"txIdstxIds\");\n    return txIds.join(\",\") + \"|\" + JSON.stringify(payload || \"\");\n  }\n\n}"],"mappings":"6tBAEA,UAAaA,WAAU,yBAGrB,oBAAYC,IAAU,CAAE,uCAFxBC,UAAU,QAGR,IAAI,CAACA,UAAU,CAAGD,IAAI,CACxB,CAAC,0JAED,iBACEE,QAAa,CACbC,YAAmB,CACnBC,OAAa,sKAEPC,KAAe,CAAG,EAAE,sCACTF,YAAY,8MAAlBG,EAAE,mCACQ,IAAIC,QAAO,CAC5B,SAACC,OAAO,CAAEC,MAAM,oBACd,MAAI,CAACR,UAAU,CAACS,GAAG,CAChBC,eAAe,CAAC,CACfC,IAAI,CAAEN,EAAE,CAACM,IAAI,CACbC,EAAE,CAAEP,EAAE,CAACQ,QAAQ,CACfC,KAAK,CAAET,EAAE,CAACS,KAAK,EAAI,IAAI,CACvBC,IAAI,CAAEV,EAAE,CAACU,IAAI,CACbC,GAAG,UAAEX,EAAE,CAACW,GAAG,kCAAN,QAAQC,QACb;AACA;AACF,CAAC,CACD;AACA;AACA;AAAA,CACCC,EAAE,CAAC,iBAAiB,CAAE,SAACC,eAAe,CAAK,CAC1C;AAAA,CACD,CAAC,CACDC,IAAI,CAAC,SAACC,CAAM,CAAK,CAChBd,OAAO,CAACc,CAAC,CAAC,CACZ,CAAC,CAAC,CACDC,KAAK,CAACd,MAAM,CAAC,GACnB,QAtBKe,IAAI,eAuBV;AACAnB,KAAK,CAACoB,IAAI,CAACD,IAAI,CAACJ,eAAe,CAAC,CAAC,kbAG5Bf,KAAK,CAACqB,IAAI,CAAC,GAAG,CAAC,CAAG,GAAG,CAAGC,IAAI,CAACC,SAAS,CAACxB,OAAO,EAAI,EAAE,CAAC,8EAC7D"},"metadata":{},"sourceType":"module"}