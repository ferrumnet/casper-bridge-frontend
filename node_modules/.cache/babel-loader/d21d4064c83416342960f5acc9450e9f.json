{"ast":null,"code":"var _jsxFileName = \"/Users/kabiribraheem/Documents/staking-casper-frontend/src/header/header.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { FHeader,\n// FHeaderCollapse,\nFButton, FItem, FTruncateText\n// FHeaderMenuItem,\n} from \"ferrum-design-system\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { ReactComponent as IconNetwork } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/images/Icon-connect-network.svg\";\nimport logo from \"../assets/images/logo-light.svg\";\nimport { CgArrowsExchangeAlt } from \"react-icons/cg\";\nimport { CasperClient, CasperServiceByJsonRPC } from \"casper-js-sdk\";\nimport { connectWallet as connectWalletDispatch } from '../redux/casper/casperActions';\nimport AddressSelector from \"../dialogs/AddressSelector\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RPC_API = \"http://44.208.234.65:7777/rpc\";\nconst STATUS_API = \"http://159.65.203.12:8888\";\nconst casperService = new CasperServiceByJsonRPC(RPC_API);\nconst casperClient = new CasperClient(RPC_API);\nconst Header = () => {\n  _s();\n  var _ref, _ref2;\n  const dispatch = useDispatch();\n  const connection = useSelector(state => state.casper.connect);\n  console.log(connection);\n  const [showAddressSelectorDlg, setShowAddressSelectorDlg] = useState(false);\n  const selectedAccount = {};\n  const connectWallet = async () => {\n    console.log(\"helloooo\");\n    await window.casperlabsHelper.requestConnection();\n    const isConnected = await window.casperlabsHelper.isConnected();\n    console.log(isConnected);\n    if (isConnected) {\n      await AccountInformation();\n    }\n  };\n  const disconnectWallet = () => {\n    window.casperlabsHelper.disconnectFromSite();\n  };\n  async function AccountInformation() {\n    const isConnected = await window.casperlabsHelper.isConnected();\n    console.log(isConnected, 'isConnectedisConnected');\n    if (isConnected) {\n      var _latestBlock$block;\n      const publicKey = await window.casperlabsHelper.getActivePublicKey();\n      console.log(publicKey);\n      //textAddress.textContent += publicKey;\n\n      const latestBlock = await casperService.getLatestBlockInfo();\n      console.log(latestBlock);\n      const root = await casperService.getStateRootHash(latestBlock === null || latestBlock === void 0 ? void 0 : (_latestBlock$block = latestBlock.block) === null || _latestBlock$block === void 0 ? void 0 : _latestBlock$block.hash);\n      console.log(latestBlock, root);\n      await connectWalletDispatch([{\n        \"address\": publicKey\n      }])(dispatch);\n      // const balanceUref = await casperService.getAccountBalanceUrefByPublicKey(root, CLPublicKey.fromHex(publicKey));\n      // console.log(balanceUref)\n      // // @ts-ignore\n      // const balance = await casperService.getAccountBalance(latestBlock?.block?.header?.state_root_hash, balanceUref);\n      // console.log(balance.toString())\n      //textBalance.textContent = `PublicKeyHex ${balance.toString()}`;\n    }\n  }\n\n  console.log((_ref = (connection === null || connection === void 0 ? void 0 : connection.connectedAccounts) || []) === null || _ref === void 0 ? void 0 : _ref.length);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FHeader, {\n      showLogo: true,\n      headerLogo: logo,\n      className: \"bg-none\",\n      children: /*#__PURE__*/_jsxDEV(FItem, {\n        display: \"flex\",\n        align: \"right\",\n        alignY: \"center\",\n        children: (_ref2 = (connection === null || connection === void 0 ? void 0 : connection.connectedAccounts) || []) !== null && _ref2 !== void 0 && _ref2.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(FButton, {\n            prefix: /*#__PURE__*/_jsxDEV(CgArrowsExchangeAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this),\n            onClick: () => {\n              setShowAddressSelectorDlg(true);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FButton, {\n            className: \"f-mr-1\",\n            title: \"Disconnect Wallet\",\n            onClick: connectWallet,\n            btnInfo: /*#__PURE__*/_jsxDEV(FItem, {\n              display: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(IconNetwork, {\n                width: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 21\n              }, this), \" \", /*#__PURE__*/_jsxDEV(FTruncateText, {\n                className: \"f-ml-1\",\n                text: selectedAccount === null || selectedAccount === void 0 ? void 0 : selectedAccount.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(FButton, {\n          className: \"f-mr-1\",\n          title: \"Connect Wallet\",\n          onClick: connectWallet\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), showAddressSelectorDlg && /*#__PURE__*/_jsxDEV(AddressSelector, {\n      show: showAddressSelectorDlg,\n      onHide: () => setShowAddressSelectorDlg(false),\n      connectedAccounts: (connection === null || connection === void 0 ? void 0 : connection.connectedAccounts) || [],\n      onAccountSelect: account => {\n        // onAccountSelect(account);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Header, \"xOyGBogBYi9acrSFat1z/DYcj5c=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","FHeader","FButton","FItem","FTruncateText","useSelector","useDispatch","CgArrowsExchangeAlt","CasperClient","CasperServiceByJsonRPC","connectWallet","connectWalletDispatch","AddressSelector","RPC_API","STATUS_API","casperService","casperClient","Header","dispatch","connection","state","casper","connect","console","log","showAddressSelectorDlg","setShowAddressSelectorDlg","selectedAccount","window","casperlabsHelper","requestConnection","isConnected","AccountInformation","disconnectWallet","disconnectFromSite","publicKey","getActivePublicKey","latestBlock","getLatestBlockInfo","root","getStateRootHash","block","hash","connectedAccounts","length","logo","address","account"],"sources":["/Users/kabiribraheem/Documents/staking-casper-frontend/src/header/header.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport {\n  FHeader,\n  // FHeaderCollapse,\n  FButton,\n  FItem,\n  FTruncateText,\n  // FHeaderMenuItem,\n} from \"ferrum-design-system\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { ReactComponent as IconNetwork } from \"../assets/images/Icon-connect-network.svg\";\nimport logo from \"../assets/images/logo-light.svg\";\nimport { CgArrowsExchangeAlt } from \"react-icons/cg\";\nimport { CasperClient, CasperServiceByJsonRPC } from \"casper-js-sdk\";\nimport { connectWallet as connectWalletDispatch } from '../redux/casper/casperActions';\n\nimport AddressSelector from \"../dialogs/AddressSelector\";\n\nconst RPC_API = \"http://44.208.234.65:7777/rpc\";\nconst STATUS_API = \"http://159.65.203.12:8888\";\n\nconst casperService = new CasperServiceByJsonRPC(RPC_API);\nconst casperClient = new CasperClient(RPC_API);\n\nconst Header = () => {\n  const dispatch = useDispatch();\n  const connection = useSelector((state: any) => state.casper.connect)\n  console.log(connection)\n\n  const [showAddressSelectorDlg, setShowAddressSelectorDlg] =\n    useState<boolean>(false);\n  const selectedAccount: { address?: string } = {};\n\n  const connectWallet = async () => {\n    console.log(\"helloooo\")\n    await window.casperlabsHelper.requestConnection();\n    const isConnected = await window.casperlabsHelper.isConnected();\n    console.log(isConnected);\n    if (isConnected) {\n      await AccountInformation();\n    }   \n  };\n\n  const disconnectWallet = () => {\n    window.casperlabsHelper.disconnectFromSite();\n  };\n\n  async function AccountInformation() {\n    const isConnected = await window.casperlabsHelper.isConnected();\n    console.log(isConnected, 'isConnectedisConnected')\n    if (isConnected) {\n        const publicKey = await window.casperlabsHelper.getActivePublicKey();\n        console.log(publicKey);\n        //textAddress.textContent += publicKey;\n\n        const latestBlock = await casperService.getLatestBlockInfo();\n        console.log(latestBlock);\n\n        const root = await casperService.getStateRootHash(latestBlock?.block?.hash);\n        console.log(latestBlock, root)\n\n        await connectWalletDispatch([{\n          \"address\": publicKey\n        }])(dispatch)\n        // const balanceUref = await casperService.getAccountBalanceUrefByPublicKey(root, CLPublicKey.fromHex(publicKey));\n        // console.log(balanceUref)\n        // // @ts-ignore\n        // const balance = await casperService.getAccountBalance(latestBlock?.block?.header?.state_root_hash, balanceUref);\n        // console.log(balance.toString())\n        //textBalance.textContent = `PublicKeyHex ${balance.toString()}`;\n    }\n  }\n  console.log((connection?.connectedAccounts || [])?.length)\n  return (\n    <div>\n      <FHeader showLogo={true} headerLogo={logo} className=\"bg-none\">\n        <FItem display={\"flex\"} align=\"right\" alignY={\"center\"}>\n          {(connection?.connectedAccounts || [])?.length ? (\n            <>\n              <FButton\n                prefix={<CgArrowsExchangeAlt />}\n                onClick={() => {\n                  setShowAddressSelectorDlg(true);\n                }}\n              ></FButton>\n              <FButton\n                className=\"f-mr-1\"\n                title={\"Disconnect Wallet\"}\n                onClick={connectWallet}\n                btnInfo={\n                  <FItem display={\"flex\"}>\n                    <IconNetwork width={20} />{\" \"}\n                    <FTruncateText\n                      className=\"f-ml-1\"\n                      text={selectedAccount?.address}\n                    />\n                  </FItem>\n                }\n              />\n            </>\n          ) : (\n            <FButton\n              className=\"f-mr-1\"\n              title={\"Connect Wallet\"}\n              onClick={connectWallet}\n            ></FButton>\n          )}\n          {/* <FHeaderCollapse>\n            <FHeaderMenuItem to=\"/status-page\" title=\"Status Page\" />\n          </FHeaderCollapse> */}\n        </FItem>\n      </FHeader>\n      {showAddressSelectorDlg && (\n        <AddressSelector\n          show={showAddressSelectorDlg}\n          onHide={() => setShowAddressSelectorDlg(false)}\n          connectedAccounts={connection?.connectedAccounts || []}\n          onAccountSelect={(account: any) => {\n           // onAccountSelect(account);\n          }}\n        />\n      )}\n    </div>\n  );\n};\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}